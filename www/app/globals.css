/* ---- Design tokens ---- */
:root{
  --bg: #ffffff;
  --text: #111827;
  --muted: #6b7280;
  --card: #ffffff;
  --border: #e5e7eb;
  --shadow: 0 1px 2px rgba(0,0,0,.06), 0 1px 3px rgba(0,0,0,.1);

  --primary: #0ea5e9;
  --primary-weak: #e0f2fe;
  --ok: #22c55e;
  --warn: #f59e0b;
  --bad: #ef4444;

  --radius: 16px;
}
html[data-theme="dark"]{
  --bg: #0b0f14;
  --text: #e5e7eb;
  --muted: #94a3b8;
  --card: #0f1720;
  --border: #1f2937;
  --shadow: none;
  --primary-weak: #062e40;
}

/* ---- Base ---- */
*{ box-sizing:border-box }
html,body{ margin:0; padding:0; background:var(--bg); color:var(--text) }
body{ font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji" }
a{ color:inherit; text-decoration:none }
ul,ol{ margin:0; padding-left:1.2rem }
button{ cursor:pointer }

/* Layout */
.site{ min-height:100dvh; display:flex; flex-direction:column }
.container{ max-width:1100px; margin:0 auto; padding:24px }
.stack-2>*+*{ margin-top:.5rem }
.stack-4>*+*{ margin-top:1rem }
.row{ display:flex; gap:.75rem; align-items:center }
.mb-2{ margin-bottom:.5rem }
.mb-4{ margin-bottom:1rem }
.mb-6{ margin-bottom:1.5rem }
.mt-6{ margin-top:1.5rem }

.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 24px; border-bottom:1px solid var(--border);
  position:sticky; top:0; background:var(--bg); z-index:10;
}
.brand{ font-weight:700 }

/* Nav */
.nav{ display:flex; gap:18px; align-items:center }
.nav a{ color:var(--muted) }
.nav a:hover{ color:var(--text) }

/* Cards */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
}
.card h3{ margin:0 0 .25rem 0; font-size:1.05rem }
.card .muted{ color:var(--muted); font-size:.95rem }

/* Hero */
.hero h1{ margin:0 0 .25rem 0; font-size:2rem }
.lead{ color:var(--muted) }

/* Grid */
.grid-cards{
  display:grid; gap:16px;
  grid-template-columns: repeat(auto-fit, minmax(260px,1fr));
}

/* Progress */
.progress-wrap{ margin:6px 0 18px }
.progress{ height:10px; width:100%; background:#f3f4f6; border-radius:999px; overflow:hidden }
.progress>div{ height:100%; background:var(--primary); width:0%; transition:width .25s }

/* Buttons */
.btn{ border:1px solid var(--border); background:#fff; padding:.6rem 1rem; border-radius:12px }
.btn.primary{ background:var(--primary); color:#fff; border-color:var(--primary) }
.btn.ghost{ background:transparent }
.btn.lg{ padding:.85rem 1.25rem; font-size:1.05rem }
.btn:disabled{ opacity:.6; cursor:not-allowed }

/* Select (modern look) */
.select{
  border:1px solid var(--border);
  background:var(--card);
  padding:.5rem .75rem;
  border-radius:12px;
  color:var(--text);
}

/* Stage single-question */
.stage{ min-height:calc(100dvh - 120px); display:grid; grid-template-rows:auto 1fr auto }
.stage-head{ margin-bottom:16px }
.center-wrap{ display:grid; place-items:start center }
.q-card{ width:min(880px,100%); margin:0 auto }

/* Controls */
.stage-controls{
  position:sticky; bottom:0; background:var(--bg);
  padding:12px 0; border-top:1px solid var(--border);
  display:flex; gap:10px; justify-content:space-between;
}

/* Likert base */
.likert{ display:flex; gap:.5rem; flex-wrap:wrap }
.likert input{ display:none }
.likert label{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  min-width: 100px; padding:12px 10px;
  border:1px solid var(--border); border-radius:14px; background:#fff;
  box-shadow:var(--shadow);
  transition: transform .05s ease, border-color .15s, box-shadow .15s, background .15s;
  user-select:none;
}
.likert label:hover{ transform: translateY(-1px) }
.likert .face{ font-size:26px; line-height:1 }
.likert .caption{ font-size:.85rem; color:var(--muted); text-align:center; margin-top:4px }
.likert input:checked + label{ border-color:var(--primary); background:var(--primary-weak); box-shadow: inset 0 0 0 2px var(--primary-weak), var(--shadow) }
label[data-tone="1"] .face{ color: var(--bad) }
label[data-tone="2"] .face{ color: #fb923c }
label[data-tone="3"] .face{ color: var(--warn) }
label[data-tone="4"] .face{ color: #10b981 }
label[data-tone="5"] .face{ color: var(--ok) }

/* Dual sliders (SleepDual) */
.dual-wrap{ display:grid; gap:16px }
.dual-row{ display:grid; gap:10px }
.dual-label{ display:flex; align-items:center; gap:8px }
.dual-label .chip{ background:#f3f4f6; padding:.2rem .45rem; border-radius:8px }
.dual-track{ position:relative; padding-top:20px }
.dual-track input[type=range]{ width:100% }
.dual-track .ticks{ position:absolute; top:0; left:0; right:0; height:20px; pointer-events:none; }
.dual-track .ticks span{ position:absolute; transform:translateX(-50%); font-size:.75rem; color:var(--muted) }

/* Score ring (compare hero) */
.score-hero{ display:flex; align-items:center; justify-content:space-between }
.score-ring{ width:120px; height:120px; border:8px solid #e5e7eb; border-radius:50%; display:grid; place-items:center }
.score-ring__value{ font-weight:700; font-size:1.5rem }
.score-ring__label{ font-size:.8rem; color:var(--muted) }

/* Category cards */
.cat-card{ border:1px solid var(--border); border-radius:var(--radius); padding:16px; background:var(--card) }
.cat-card__head{ display:flex; justify-content:space-between; align-items:center; gap:10px }
.pill{ display:inline-block; padding:.15rem .5rem; border-radius:999px; background:#eef2ff; color:#4f46e5; font-size:.8rem }
.cat-card[data-color="yellow"] .pill{ background:#fff7ed; color:#c2410c }
.cat-card[data-color="red"] .pill{ background:#fee2e2; color:#b91c1c }
.cat-card__score{ font-weight:700 }

/* Footer */
.site-footer{ border-top:1px solid var(--border); background:#fafafa; margin-top:auto }
.footer-inner{ display:flex; align-items:center; justify-content:space-between; padding:18px 0 }
.footer-nav{ display:flex; gap:16px; color:var(--muted); font-size:.9rem }

/* Anim */
.q-animate-in{ animation:fadeIn .14s ease }
.q-animate-out{ animation:fadeOut .12s ease }
@keyframes fadeIn{ from{ opacity:0; transform:translateY(-4px) } to{ opacity:1; transform:none } }
@keyframes fadeOut{ from{ opacity:1 } to{ opacity:0; transform:translateY(4px) } }
